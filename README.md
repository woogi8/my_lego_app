# 🧱 LEGO 관리 시스템

React와 Node.js를 사용한 개인 LEGO 컬렉션 관리 애플리케이션입니다.

## 📁 파일 구조

```
D:\project\lego_vibe2\
├── my_lego_list.xlsx          # 📊 메인 데이터베이스 파일 (자동 생성)
├── server/                    # 🖥️ 백엔드 서버
│   ├── server.js             # Node.js API 서버
│   └── package.json          # 서버 의존성
├── src/                       # 🌐 프론트엔드 (React)
├── start-backend.bat         # 🚀 백엔드 서버 시작 스크립트
└── README.md                 # 📖 이 파일
```

## 🚀 실행 방법

### 1단계: 백엔드 서버 시작
```bash
# 방법 1: 배치 파일 실행 (Windows)
start-backend.bat

# 방법 2: 수동 실행
cd server
npm install
npm start
```

### 2단계: 프론트엔드 실행
```bash
# 프로젝트 루트에서
npm start
```

## 🌐 접속 주소
- **프론트엔드**: http://localhost:3000
- **백엔드 API**: http://localhost:3001

## 💾 데이터베이스 파일

### 📍 **위치**: `D:\project\lego_vibe2\my_lego_list.xlsx`

### 🔄 **자동 관리**:
- ✅ 서버 시작 시 자동으로 빈 파일 생성 (없는 경우)
- ✅ 레고 등록/수정/삭제 시 실시간 업데이트
- ✅ 일괄 등록 시 자동 저장
- ✅ 데이터 불러오기 시 파일 덮어쓰기

## 🎯 주요 기능

### 📝 **레고 등록**
- 개별 등록: 폼을 통한 하나씩 등록
- 일괄 등록: 엑셀 파일 업로드로 여러 개 등록
- 자동 이미지 URL 생성 (Brickset 연동)

### 📋 **레고 관리**
- 목록 조회 및 카드형 표시
- 인라인 편집 (수정/삭제)
- 수익률 및 손익 계산
- Brickset 링크 (이미지 클릭)

### 📊 **데이터 관리**
- Excel 파일을 DB로 직접 사용
- 데이터 백업/복원
- 템플릿 다운로드

### 🔧 **관리 필드**
| 필드 | 설명 |
|------|------|
| 출시일 | 레고 공식 출시 날짜 |
| 레고 번호 | 제품 번호 (예: 6036) |
| 제품명 | 레고 세트 이름 |
| 테마 | 레고 테마 (Castle, City, Star Wars 등) |
| 구입일 | 실제 구매한 날짜 |
| 정가 | 공식 판매가격 |
| 구입 가격 | 실제 구매가격 |
| 현재 시세 | 현재 중고 시장 가격 |
| 상태 | 레고 현재 상태 (미개봉, 조립완료 등) |

## 🛠️ API 엔드포인트

| Method | URL | 설명 |
|--------|-----|------|
| GET | `/api/legos` | 모든 레고 데이터 조회 |
| POST | `/api/legos` | 새 레고 추가 |
| PUT | `/api/legos/:index` | 레고 수정 |
| DELETE | `/api/legos/:index` | 레고 삭제 |
| POST | `/api/legos/bulk` | 일괄 추가 |
| PUT | `/api/legos` | 전체 데이터 덮어쓰기 |
| GET | `/api/status` | 파일 상태 확인 |

## ⚡ 특징

### ✅ **파일 기반 DB**
- 엑셀 파일을 직접 데이터베이스로 사용
- 별도 DB 설치 불필요
- 엑셀에서 직접 데이터 편집 가능

### ✅ **실시간 동기화**
- 웹에서 변경 → 즉시 엑셀 파일 업데이트
- 엑셀 파일 업로드 → 웹에서 즉시 반영

### ✅ **오프라인 백업**
- localStorage 자동 백업
- 서버 오류 시 로컬 데이터로 복구

## 🔧 기술 스택

### 백엔드
- **Node.js** + **Express**: API 서버
- **XLSX**: 엑셀 파일 읽기/쓰기
- **CORS**: 프론트엔드 연동

### 프론트엔드
- **React**: UI 프레임워크
- **XLSX**: 클라이언트 엑셀 처리

## 🚨 문제 해결

### 서버 연결 오류
```
❌ API 호출 오류: fetch failed
```
**해결법**: 백엔드 서버가 실행 중인지 확인 (`http://localhost:3001`)

### 파일 권한 오류
```
❌ 파일 저장 실패: EACCES permission denied
```
**해결법**: 관리자 권한으로 실행 또는 폴더 권한 확인

### 포트 충돌
```
❌ Error: listen EADDRINUSE :::3001
```
**해결법**: 다른 애플리케이션에서 3001 포트 사용 중지

## 📈 데이터 흐름

```
사용자 입력 → React 프론트엔드 → API 호출 → Node.js 서버 → XLSX 라이브러리 → my_lego_list.xlsx 파일
```

## 🎯 사용 시나리오

1. **새 레고 구매**: 웹에서 등록 → 자동으로 `my_lego_list.xlsx`에 저장
2. **컬렉션 정리**: 엑셀에서 직접 편집 → 웹에서 업로드하여 동기화  
3. **가격 추적**: 현재 시세 업데이트 → 수익률 자동 계산
4. **백업**: `my_lego_list.xlsx` 파일 복사 → 다른 PC에서 복원

---
**💡 팁**: `my_lego_list.xlsx` 파일을 정기적으로 백업하여 데이터 손실을 방지하세요!